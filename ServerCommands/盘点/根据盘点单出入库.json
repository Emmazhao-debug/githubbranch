{"Description":"盘亏出库，盘盈入库","Enabled":true,"Triggers":[{"$type":"Forguncy.ServerCommands.Models.InvokeTrigger, ServerDesignerCommon","Parameters":[{"Name":"盘点单号"},{"Name":"盘亏盘盈"}]}],"Commands":[{"$type":"Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon","ParameterName":"应处理物品数","TableValue":{"TableName":"盘点详情表","TableValueType":3,"SqlCondition":{"$type":"ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess","Condition1":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"盘点详情表","ColumnName":"盘点ID","RelationBinding":{"RelatedTable":"盘点表","RelatedColumn":"ID","DisplayColumn":"单号"}},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=盘点单号"},"Id":"f79bafaf-dd0f-4ae7-935a-3c2b6194821d"},"Condition2":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"盘点详情表","ColumnName":"盘亏盘盈"},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=盘亏盘盈"},"Id":"7f825cf9-f0bb-421b-9405-5b062671bc2e"},"Id":"c073e2c4-c989-4e79-962b-cbac81dbf765"}},"ID":"d164127dcb144a1baa89fbcddeaf0203"},{"$type":"Forguncy.Model.ConditionCommand, ServerDesignerCommon","ConditionAndCommandPairList":[{"Condition":{"$type":"Forguncy.Model.IfCondition, ServerDesignerCommon","param":{"$type":"Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon","ParamObject":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=应处理物品数"}},"value":"0","compareType":2,"Id":"172c9ddd-51db-4d2d-a023-91fa95f6c979"},"CommandList":[{"$type":"Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon","ParameterName":"应处理物品详情","TableValue":{"TableName":"盘点详情表","BindingInfos":[{"BindingInfo":{"TableName":"盘点详情表","ColumnName":"ID"},"ColumnName":"ID"},{"BindingInfo":{"TableName":"盘点详情表","ColumnName":"物品ID"},"ColumnName":"物品ID"},{"BindingInfo":{"TableName":"盘点详情表","ColumnName":"变更数"},"ColumnName":"数量"},{"BindingInfo":{"TableName":"盘点详情表","ColumnName":"物品ID","RelationBinding":{"RelatedTable":"物品表","RelatedColumn":"ID","DisplayColumn":"销售价"}},"ColumnName":"单价"},{"BindingInfo":{"TableName":"盘点详情表","ColumnName":"备注"},"ColumnName":"备注"}],"SqlCondition":{"$type":"ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess","Condition1":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"盘点详情表","ColumnName":"盘点ID","RelationBinding":{"RelatedTable":"盘点表","RelatedColumn":"ID","DisplayColumn":"单号"}},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=盘点单号"},"Id":"a10f57f6-9309-4146-9725-088f4d716a8f"},"Condition2":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"盘点详情表","ColumnName":"盘亏盘盈"},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=盘亏盘盈"},"Id":"d5eab0b6-928b-48ef-aec6-f7fd959089c2"},"Id":"489ee816-3bd5-4a1e-b6a3-e0fc81a6ceca"}},"ID":"3a6c3ce6437b4bc5a84deeb49582c987"},{"$type":"Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon","ParameterName":"总金额","ParameterValue":"0","ID":"16a1d22f51774e9ba82735eebbb5537b"},{"$type":"Forguncy.Model.LoopCommand, ServerDesignerCommon","LoopInfo":{"$type":"Forguncy.Model.CountLoopInfo, ServerDesignerCommon","LoopCount":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=应处理物品详情"},"LoopItemParamName":"Item"},"CommandList":[{"$type":"Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon","ParameterName":"总金额","ParameterValue":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=总金额+Item.数量*Item.单价"},"ID":"a634c94afb9543068d5263481a46feaa"}]},{"$type":"Forguncy.Model.RequestServerCommand, ServerDesignerCommon","ServerCommandName":"新建出入库单_私有","Parameters":[{"$type":"Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=IF(盘亏盘盈=\"盘亏\",5,6)"},"ParamName":"出入库"},{"$type":"Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=TODAY()"},"ParamName":"日期"},{"$type":"Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=IF(盘亏盘盈=\"盘亏\",7,8)"},"ParamName":"类型"},{"$type":"Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon","ParamName":"客户ID"},{"$type":"Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=盘点单号"},"ParamName":"其他出入库对象"},{"$type":"Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon","ParamName":"联系人"},{"$type":"Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon","ParamName":"联系电话"},{"$type":"Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=总金额"},"ParamName":"总金额"},{"$type":"Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon","ParamName":"项目ID"},{"$type":"Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=IF(盘亏盘盈=\"盘亏\",\"由盘点单自动生成的出库单\",\"由盘点单自动生成的入库单\")"},"ParamName":"备注"},{"$type":"Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=应处理物品详情"},"ParamName":"详情表"},{"$type":"Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon","Value":"0","ParamName":"是否检查盘点中"}],"CheckDataValidation":true}],"ID":"1004c43c-539f-4e8e-ad48-56c3cc66677b"}]}],"Name":"根据盘点单出入库"}