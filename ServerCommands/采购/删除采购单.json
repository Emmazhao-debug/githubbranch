{"Enabled":true,"Triggers":[{"$type":"Forguncy.ServerCommands.Models.PostRequestTrigger, ServerDesignerCommon","Permission":{"AllowRoles":["采购主管","采购员"]},"Parameters":[{"Name":"订单ID"},{"Name":"删除入库单"}]}],"Commands":[{"$type":"Forguncy.Model.ServerTransactionCommand, ServerDesignerCommon","CommandList":[{"$type":"Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon","ParameterName":"订单号","TableValue":{"TableName":"采购订单表","OnlyGetValue":true,"TableValueType":0,"BindingInfos":[{"BindingInfo":{"TableName":"采购订单表","ColumnName":"单号"},"ColumnName":"单号"}],"SqlCondition":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"采购订单表","ColumnName":"ID"},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=订单ID"},"Id":"fbcaa272-5ca8-43a3-9fa0-e9c72bdc0022"}},"ID":"6ea42182863d4bfd9c58d0f0d8b20988"},{"$type":"Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon","TableName":"采购订单表","UpdateType":"delete","ShowConfirm":true,"ConfirmText":"您确定要删除吗？","RowsToUpdate":1,"RowsToUpdateCondition":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"采购订单表","ColumnName":"ID"},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=订单ID"},"Id":"3b1838f7-046f-4b0f-8714-f16a36340e4f"},"UpdateValues":[],"ParamNameToSaveNewRowValue":"NewRow"},{"$type":"Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon","TableName":"采购订单详情表","UpdateType":"delete","ShowConfirm":true,"ConfirmText":"您确定要删除吗？","RowsToUpdate":1,"RowsToUpdateCondition":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"采购订单详情表","ColumnName":"采购订单ID"},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=订单ID"},"Id":"9ed53b8c-a5f6-4089-854f-ddac1e1c939d"},"UpdateValues":[],"ParamNameToSaveNewRowValue":"NewRow"},{"$type":"Forguncy.Model.ConditionCommand, ServerDesignerCommon","ConditionAndCommandPairList":[{"Condition":{"$type":"Forguncy.Model.IfCondition, ServerDesignerCommon","param":{"$type":"Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon","ParamObject":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=删除入库单"}},"value":"1","Id":"1803e810-0f2b-49d9-bc9d-ebfb338a1272"},"CommandList":[{"$type":"Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon","ParameterName":"入库单列表","TableValue":{"TableName":"出入库表","BindingInfos":[{"BindingInfo":{"TableName":"出入库表","ColumnName":"ID"},"ColumnName":"ID"}],"SqlCondition":{"$type":"ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess","Condition1":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"出入库表","ColumnName":"类型"},"Value":"1","Id":"7e88de67-bb44-462c-a1b5-c1e17767c871"},"Condition2":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"出入库表","ColumnName":"其他出入库对象"},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=订单号"},"Id":"d33bcdca-4994-45a5-824f-7d8b3966bc54"},"Id":"d842bc9d-f570-4b80-89bf-787c8e2bc33d"}},"ID":"f17e7a9a64d04215ba01171f5fb685dc","Comments":"类型 1 为采购入库"},{"$type":"Forguncy.Model.LoopCommand, ServerDesignerCommon","LoopInfo":{"$type":"Forguncy.Model.CountLoopInfo, ServerDesignerCommon","LoopCount":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=入库单列表"},"LoopItemParamName":"Item"},"CommandList":[{"$type":"Forguncy.Model.RequestServerCommand, ServerDesignerCommon","ServerCommandName":"删除出入库单","Parameters":[{"$type":"Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=Item.ID"},"ParamName":"出入库单ID"}],"CheckDataValidation":true}]}],"ID":"b68c9fd3-141f-4ce3-a3f2-31b98ae0e6f2"}]}]}],"Name":"删除采购单"}