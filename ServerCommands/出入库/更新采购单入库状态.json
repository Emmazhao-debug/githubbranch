{"Enabled":true,"Triggers":[{"$type":"Forguncy.ServerCommands.Models.InvokeTrigger, ServerDesignerCommon","Parameters":[{"Name":"订单号"}]}],"Commands":[{"$type":"Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon","ParameterName":"采购详情","TableValue":{"TableName":"采购订单详情表","BindingInfos":[{"BindingInfo":{"TableName":"采购订单详情表","ColumnName":"物品ID"},"ColumnName":"物品ID"},{"BindingInfo":{"TableName":"采购订单详情表","ColumnName":"采购数量"},"ColumnName":"采购数量"}],"SqlCondition":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"采购订单详情表","ColumnName":"采购订单ID","RelationBinding":{"RelatedTable":"采购订单表","RelatedColumn":"ID","DisplayColumn":"单号"}},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=订单号"},"Id":"ca0e4e1e-d16f-485d-9c0b-56a6b449cacd"}},"ID":"041b5a2623ac4c3296aa79a0b1b6ae23"},{"$type":"Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon","ParameterName":"已入库","ParameterValue":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=1"},"ID":"c53c3e64e1fd4c56af83661b62cc5d13"},{"$type":"Forguncy.Model.LoopCommand, ServerDesignerCommon","LoopInfo":{"$type":"Forguncy.Model.CountLoopInfo, ServerDesignerCommon","LoopCount":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=采购详情"},"LoopItemParamName":"Item"},"CommandList":[{"$type":"Forguncy.Model.ConditionCommand, ServerDesignerCommon","ConditionAndCommandPairList":[{"Condition":{"$type":"Forguncy.Model.IfCondition, ServerDesignerCommon","param":{"$type":"Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon","ParamObject":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=已入库"}},"value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=1"},"Id":"803f31fb-9bdf-44ac-9d6b-73ecd87052bd"},"CommandList":[{"$type":"Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon","ParameterName":"出入库数量","TableValue":{"TableName":"出入库详情表","OnlyGetValue":true,"TableValueType":0,"BindingInfos":[{"BindingInfo":{"TableName":"出入库详情表","ColumnName":"总数量"},"ColumnName":"总数量"}],"SqlCondition":{"$type":"ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess","Condition1":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"出入库详情表","ColumnName":"出入库ID","RelationBinding":{"RelatedTable":"出入库表","RelatedColumn":"ID","DisplayColumn":"其他出入库对象"}},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=订单号"},"Id":"5b3134de-ff0b-453f-b23d-806c395d239f"},"Condition2":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"出入库详情表","ColumnName":"物品ID"},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=Item.物品ID"},"Id":"7d96844b-04b7-495a-9231-a91f0f2a7c4a"},"Id":"a5cea9de-ffad-4436-a0a0-9423a6770fe1"}},"ID":"5193056d60c04f678c60c26d548156a2"},{"$type":"Forguncy.Model.ConditionCommand, ServerDesignerCommon","ConditionAndCommandPairList":[{"Condition":{"$type":"Forguncy.Model.IfCondition, ServerDesignerCommon","param":{"$type":"Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon","ParamObject":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=Item.采购数量"}},"value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=出入库数量"},"compareType":2,"Id":"59f6d4fc-679b-4639-8030-3c575603db1c"},"CommandList":[{"$type":"Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon","ParameterName":"已入库","ParameterValue":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=0"},"ID":"03fe276c784b40d2b8362510bdf9b515"}],"ID":"c03f246a-4789-46cc-9102-b6461a0e4a6f"}]}],"Comments":"如果已入库不为1，说明前面已经有物品没有完成入库，后续物品就不用再查看了。","ID":"1118efd3-f054-4570-b7fd-9ab0edf3dca3"}]}],"Comments":"逐一查看每个物品是否入库完成"},{"$type":"Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon","TableName":"采购订单表","ShowConfirm":false,"ConfirmText":"您确定要更新这行记录吗？","RowsToUpdate":1,"RowsToUpdateCondition":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"采购订单表","ColumnName":"单号"},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=订单号"},"Id":"228d7af2-610e-4608-805f-237bce1d14f1"},"UpdateValues":[{"ColumnName":"已入库","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=已入库"}}],"ParamNameToSaveNewRowValue":"NewRow"}],"Name":"更新采购单入库状态"}