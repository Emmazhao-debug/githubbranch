{"Enabled":true,"Triggers":[{"$type":"Forguncy.ServerCommands.Models.InvokeTrigger, ServerDesignerCommon","Parameters":[{"Name":"订单号"}]}],"Commands":[{"$type":"Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon","ParameterName":"销售详情","TableValue":{"TableName":"销售订单详情表","BindingInfos":[{"BindingInfo":{"TableName":"销售订单详情表","ColumnName":"物品ID"},"ColumnName":"物品ID"},{"BindingInfo":{"TableName":"销售订单详情表","ColumnName":"销售数量"},"ColumnName":"销售数量"}],"SqlCondition":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"销售订单详情表","ColumnName":"销售订单ID","RelationBinding":{"RelatedTable":"销售订单表","RelatedColumn":"ID","DisplayColumn":"单号"}},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=订单号"},"Id":"d45ab77a-7b0e-4387-8d92-97d6103e8179"}},"ID":"1acf81596dec45d3bf3676fa7820a11f"},{"$type":"Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon","ParameterName":"已出库","ParameterValue":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=1"},"ID":"abd35e61cbc544e9a804ea19f6f2391a"},{"$type":"Forguncy.Model.LoopCommand, ServerDesignerCommon","LoopInfo":{"$type":"Forguncy.Model.CountLoopInfo, ServerDesignerCommon","LoopCount":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=销售详情"},"LoopItemParamName":"Item"},"CommandList":[{"$type":"Forguncy.Model.ConditionCommand, ServerDesignerCommon","ConditionAndCommandPairList":[{"Condition":{"$type":"Forguncy.Model.IfCondition, ServerDesignerCommon","param":{"$type":"Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon","ParamObject":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=已出库"}},"value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=1"},"Id":"9fb8f830-8d0d-44fa-b412-97adecb54d0c"},"CommandList":[{"$type":"Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon","ParameterName":"出入库数量","TableValue":{"TableName":"出入库详情表","OnlyGetValue":true,"TableValueType":0,"BindingInfos":[{"BindingInfo":{"TableName":"出入库详情表","ColumnName":"总数量"},"ColumnName":"总数量"}],"SqlCondition":{"$type":"ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess","Condition1":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"出入库详情表","ColumnName":"出入库ID","RelationBinding":{"RelatedTable":"出入库表","RelatedColumn":"ID","DisplayColumn":"其他出入库对象"}},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=订单号"},"Id":"27cb6afd-e0db-45e4-b6cf-c464876de9fa"},"Condition2":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"出入库详情表","ColumnName":"物品ID"},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=Item.物品ID"},"Id":"e62e2f1d-71f3-40d6-aa7c-e8d6b6670989"},"Id":"5712f12e-b920-4fef-ab4a-a798676755b4"}},"ID":"1427d58425d3417fa9d728dc047ac415"},{"$type":"Forguncy.Model.ConditionCommand, ServerDesignerCommon","ConditionAndCommandPairList":[{"Condition":{"$type":"Forguncy.Model.IfCondition, ServerDesignerCommon","param":{"$type":"Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon","ParamObject":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=Item.销售数量"}},"value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=出入库数量"},"compareType":2,"Id":"a5f7046c-a646-4eaa-a9b0-0d224ec95e24"},"CommandList":[{"$type":"Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon","ParameterName":"已出库","ParameterValue":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=0"},"ID":"7b0ca2a4cfbf404ba9d34d4b6e345585"}],"ID":"c03f246a-4789-46cc-9102-b6461a0e4a6f"}]}],"Comments":"如果已出库不为1，说明前面已经有物品没有完成出库，后续物品就不用再查看了。","ID":"1118efd3-f054-4570-b7fd-9ab0edf3dca3"}]}],"Comments":"逐一查看每个物品是否入库完成"},{"$type":"Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon","TableName":"销售订单表","ShowConfirm":false,"ConfirmText":"您确定要更新这行记录吗？","RowsToUpdate":1,"RowsToUpdateCondition":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"销售订单表","ColumnName":"单号"},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=订单号"},"Id":"ba9f4b07-2f63-4e75-96f6-c52c6dbfdf0b"},"UpdateValues":[{"ColumnName":"已出库","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=已出库"}}],"ParamNameToSaveNewRowValue":"NewRow"}],"Name":"更新销售单出库状态"}