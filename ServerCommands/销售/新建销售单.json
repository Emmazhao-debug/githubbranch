{"Enabled":true,"Triggers":[{"$type":"Forguncy.ServerCommands.Models.PostRequestTrigger, ServerDesignerCommon","Permission":{"AllowRoles":["销售员","销售主管"]},"Parameters":[{"Name":"销售日期"},{"Name":"客户ID"},{"Name":"联系人"},{"Name":"联系电话"},{"Name":"交付日期"},{"Name":"项目ID"},{"Name":"销售员"},{"Name":"销售部门"},{"Name":"总金额"},{"Name":"备注"},{"Type":1,"ArrayParamItems":[{"Name":"物品ID"},{"Name":"数量"},{"Name":"单价"},{"Name":"备注"}],"PrimaryKeys":["ID"],"Name":"销售详情"}]}],"Commands":[{"$type":"Forguncy.Model.ServerTransactionCommand, ServerDesignerCommon","CommandList":[{"$type":"Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon","TableName":"销售订单表","UpdateType":"add","ShowConfirm":false,"ConfirmText":"您确定添加这条记录?","UpdateValues":[{"ColumnName":"销售日期","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=销售日期"}},{"ColumnName":"客户ID","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=客户ID"}},{"ColumnName":"联系人","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=联系人"}},{"ColumnName":"联系电话","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=联系电话"}},{"ColumnName":"交货日期","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=交付日期"}},{"ColumnName":"项目ID","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=项目ID"}},{"ColumnName":"销售员","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=销售员"}},{"ColumnName":"销售部门","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=销售部门"}},{"ColumnName":"备注","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=备注"}},{"ColumnName":"已出库","Value":"0"},{"ColumnName":"总金额","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=总金额"}}],"ParamNameToSaveNewRowValue":"销售单"},{"$type":"Forguncy.Model.LoopCommand, ServerDesignerCommon","LoopInfo":{"$type":"Forguncy.Model.CountLoopInfo, ServerDesignerCommon","LoopCount":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=销售详情"},"LoopItemParamName":"Item"},"CommandList":[{"$type":"Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon","TableName":"销售订单详情表","UpdateType":"add","ShowConfirm":false,"ConfirmText":"您确定添加这条记录?","UpdateValues":[{"ColumnName":"销售订单ID","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=销售单.ID"}},{"ColumnName":"物品ID","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=Item.物品ID"}},{"ColumnName":"销售数量","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=Item.数量"}},{"ColumnName":"单价","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=Item.单价"}},{"ColumnName":"备注","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=Item.备注"}}],"ParamNameToSaveNewRowValue":"NewRow"},{"$type":"Forguncy.Model.RequestServerCommand, ServerDesignerCommon","ServerCommandName":"关联供应商客户与物品","Parameters":[{"$type":"Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=客户ID"},"ParamName":"供应商客户ID"},{"$type":"Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=Item.物品ID"},"ParamName":"物品ID"}],"CheckDataValidation":true}]}]}],"Name":"新建销售单"}