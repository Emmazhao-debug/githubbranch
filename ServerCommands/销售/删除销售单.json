{"Enabled":true,"Triggers":[{"$type":"Forguncy.ServerCommands.Models.PostRequestTrigger, ServerDesignerCommon","Permission":{"AllowRoles":["销售员","销售主管"]},"Parameters":[{"Name":"订单ID"},{"Name":"删除出库单"}]}],"Commands":[{"$type":"Forguncy.Model.ServerTransactionCommand, ServerDesignerCommon","CommandList":[{"$type":"Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon","ParameterName":"订单号","TableValue":{"TableName":"销售订单表","OnlyGetValue":true,"TableValueType":0,"BindingInfos":[{"BindingInfo":{"TableName":"销售订单表","ColumnName":"单号"},"ColumnName":"单号"}],"SqlCondition":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"销售订单表","ColumnName":"ID"},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=订单ID"},"Id":"fb6a15b1-ccc4-47bf-823e-4c7c5d16b4a8"}},"ID":"50295fcfa98149f89e68111f13266cbd"},{"$type":"Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon","TableName":"销售订单表","UpdateType":"delete","ShowConfirm":true,"ConfirmText":"您确定要删除吗？","RowsToUpdate":1,"RowsToUpdateCondition":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"销售订单表","ColumnName":"ID"},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=订单ID"},"Id":"b759b4d1-2cf7-44a2-883f-8ddcff6eccf0"},"UpdateValues":[],"ParamNameToSaveNewRowValue":"NewRow"},{"$type":"Forguncy.Model.UpdateDataTableCommand, ServerDesignerCommon","TableName":"销售订单详情表","UpdateType":"delete","ShowConfirm":true,"ConfirmText":"您确定要删除吗？","RowsToUpdate":1,"RowsToUpdateCondition":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"销售订单详情表","ColumnName":"销售订单ID"},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=订单ID"},"Id":"806c1f4e-47c8-4efa-b363-df68477b29d6"},"UpdateValues":[],"ParamNameToSaveNewRowValue":"NewRow"},{"$type":"Forguncy.Model.ConditionCommand, ServerDesignerCommon","ConditionAndCommandPairList":[{"Condition":{"$type":"Forguncy.Model.IfCondition, ServerDesignerCommon","param":{"$type":"Forguncy.Model.IfConditionServerSiteParam, ServerDesignerCommon","ParamObject":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=删除出库单"}},"value":"1","Id":"ca771c93-2d7d-4c21-a58a-3d34d4e25bb3"},"CommandList":[{"$type":"Forguncy.Model.Commands.SetParameterCommand, ServerDesignerCommon","ParameterName":"出库单列表","TableValue":{"TableName":"出入库表","BindingInfos":[{"BindingInfo":{"TableName":"出入库表","ColumnName":"ID"},"ColumnName":"ID"}],"SqlCondition":{"$type":"ForguncyDataAccess.RelationSqlCondition, ForguncyDataAccess","Condition1":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"出入库表","ColumnName":"类型"},"Value":"4","Id":"910dd71f-e02a-4e06-b5b0-c72bff51626f"},"Condition2":{"$type":"ForguncyDataAccess.GeneralCESqlCondition, ForguncyDataAccess","ColumnBindingInfo":{"TableName":"出入库表","ColumnName":"其他出入库对象"},"Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=订单号"},"Id":"8472e86c-84a5-49a7-85b0-326471eed9c5"},"Id":"9fc26c79-4403-4c21-a330-f1155807377a"}},"ID":"d3e7f0e38dbf42bdb0381eb747ba4c12","Comments":"类型 4 为销售出库"},{"$type":"Forguncy.Model.LoopCommand, ServerDesignerCommon","LoopInfo":{"$type":"Forguncy.Model.CountLoopInfo, ServerDesignerCommon","LoopCount":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=出库单列表"},"LoopItemParamName":"Item"},"CommandList":[{"$type":"Forguncy.Model.RequestServerCommand, ServerDesignerCommon","ServerCommandName":"删除出入库单","Parameters":[{"$type":"Forguncy.Model.RequestServerCommandObjectParam, ServerDesignerCommon","Value":{"$type":"Forguncy.Model.FormulaReferObject, ServerDesignerCommon","SerializeProperty":"=Item.ID"},"ParamName":"出入库单ID"}],"CheckDataValidation":true}]}],"ID":"b68c9fd3-141f-4ce3-a3f2-31b98ae0e6f2"}]}]}],"Name":"删除销售单"}